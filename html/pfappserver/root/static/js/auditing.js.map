{"version":3,"sources":["../admin/auditing.js","../admin/radiusauditlog.js","../admin/radiuslog.js","../admin/option82.js"],"names":["init","$","on","event","match","exec","delegateTarget","id","emptyId","trigger","addClass","modal","saved_search_form","search_form","uri","URI","attr","query","resource","serialize","replace","find","ajax","url","type","data","always","reset","done","location","reload","fail","jqXHR","animate","scrollTop","status_msg","getStatusMsg","showError","this","focus","window","hashchange","pfOnHashChange","updateSection","items","RadiusAuditLog","RadiusAuditLogView","parent","prototype","Items","formName","modalId","get","options","success","errorSibling","post","ItemView","call","F","click","preventDefault","milliseconds","a","currentTarget","timespec","hash","amount","parseInt","end_time","Date","start_time","getTime","start_date_input","start_time_input","datepicker","timepicker","toTimeString","end_date_input","end_time_input"],"mappings":"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","file":"auditing.js","sourcesContent":["/* -*- Mode: js; indent-tabs-mode: nil; js-indent-level: 4 -*- */\n\nfunction init() {\n    $('#section').on('section.loaded', function(event) {\n        // Initialization common to both sections (RADIUS Audit Log & DHCP Option82)\n        $('[id$=\"Empty\"]').on('click', '[href=\"#add\"]', function(event) {\n            var match = /(.+)Empty/.exec(event.delegateTarget.id);\n            var id = match[1];\n            var emptyId = match[0];\n            $('#'+id).trigger('addrow');\n            $('#'+emptyId).addClass('hidden');\n            return false;\n        });\n        var modal  = $(\"#savedSearch\");\n        var saved_search_form = $(\"#savedSearchForm\");\n        var search_form = $('#search');\n        saved_search_form.on('submit', function(event) {\n            modal.modal('hide');\n            var uri = new URI(search_form.attr('action'));\n            var query = uri.resource() +\n                \"?\" +\n                search_form.serialize();\n            query = query.replace(/^\\//,'');\n            saved_search_form\n            .find('[name=\"query\"]')\n            .attr('value',query);\n            $.ajax({\n                'url'  : saved_search_form.attr('action'),\n                'type' : saved_search_form.attr('method') || \"POST\",\n                'data' : saved_search_form.serialize()\n                })\n                .always(function() {\n                    modal.modal('hide');\n                    saved_search_form[0].reset();\n                })\n                .done(function(data) {\n                    location.reload();\n                })\n                .fail(function(jqXHR) {\n                    $(\"body,html\").animate({scrollTop:0}, 'fast');\n                    var status_msg = getStatusMsg(jqXHR);\n                    showError($('#section h2'), status_msg);\n                });\n            return false;\n        });\n        modal.on('shown', function(event) {\n            $(this).find(':input:first').focus();\n        });\n    });\n\n    /* Initialize datepickers */\n  $(window).hashchange(pfOnHashChange(updateSection,'/auditing/radiuslog/'));\n  $(window).hashchange();\n}\n","/* -*- Mode: js; indent-tabs-mode: nil; js-indent-level: 4 -*- */\n\n$(function() { // DOM ready\n    var items = new RadiusAuditLog();\n    var view = new RadiusAuditLogView({ items: items, parent: $('#section') });\n});\n\n/*\n * The RadiusAuditLog class defines the operations available from the controller.\n */\nvar RadiusAuditLog = function() {\n};\n\nRadiusAuditLog.prototype = new Items();\n\nRadiusAuditLog.prototype.id  = '#radiusAuditLog';\n\nRadiusAuditLog.prototype.formName  = 'modalRadiusAuditLog';\n\nRadiusAuditLog.prototype.modalId   = '#modalRadiusAuditLog';\n\nRadiusAuditLog.prototype.get = function(options) {\n    $.ajax({\n        url: options.url\n    })\n        .always(options.always)\n        .done(options.success)\n        .fail(function(jqXHR) {\n            var status_msg = getStatusMsg(jqXHR);\n            showError(options.errorSibling, status_msg);\n        });\n};\n\nRadiusAuditLog.prototype.post = function(options) {\n    $.ajax({\n        url: options.url,\n        type: 'POST',\n        data: options.data\n    })\n        .always(options.always)\n        .done(options.success)\n        .fail(function(jqXHR) {\n            var status_msg = getStatusMsg(jqXHR);\n            showError(options.errorSibling, status_msg);\n        });\n};\n\n/*\n * The RadiusAuditLogView class defines the DOM operations from the Web interface.\n */\n\nvar RadiusAuditLogView = function(options) {\n    ItemView.call(this,options);\n    var that = this;\n    this.parent = options.parent;\n    this.items = options.items;\n};\n\nRadiusAuditLogView.prototype = (function(){\n    function F(){}\n    F.prototype = ItemView.prototype;\n    return new F();\n})();\n\n","/* -*- Mode: js; indent-tabs-mode: nil; js-indent-level: 4 -*- */\n\n$(function() { // DOM ready\n    $('#section').on('section.loaded', function(event) {\n        $('#report_radius_audit_log .radiud_audit_log_datetimepicker a').click(function(event) {\n            event.preventDefault();\n            var a = event.currentTarget;\n            var timespec = a.hash.replace(/^#last/,\"\");\n            var amount = parseInt(/^\\d+/.exec(timespec)[0]);\n            var type = /[^\\d]+$/.exec(timespec)[0];\n            var milliseconds;\n            if(type === \"mins\") {\n                milliseconds = amount * 60 * 1000;\n            } else if( type === \"hours\" || type === \"hour\" ) {\n                milliseconds = amount * 60 * 60 * 1000;\n            }\n            var end_time = new Date();\n            var start_time = new Date(end_time.getTime() - milliseconds);\n            var start_date_input = $('#start_date');\n            var start_time_input = $('#start_time');\n            start_date_input.datepicker(\"setDate\", start_time);\n            start_time_input.timepicker(\"setTime\",start_time.toTimeString());\n            var end_date_input = $('#end_date');\n            var end_time_input = $('#end_time');\n            end_date_input.attr(\"value\", \"\");\n            end_time_input.attr(\"value\", \"\");\n            return false;\n        });\n    });\n});\n","$(function() { // DOM ready\n});\n"]}