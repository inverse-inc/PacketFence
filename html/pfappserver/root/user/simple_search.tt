[% MACRO header(column, title, class) BLOCK -%]
[% params = { by => column, filter => filter };
    IF by == column && direction == 'asc';
      new_direction = 'desc';
    END %]
      <th[% " class=\"$class\"" IF class %]><a href="[% c.pf_hash_for(c.controller('User').action_for('simple_search'),'filter', filter, 'by', column, 'direction', new_direction) %]">[% title %][% IF by == column %] <i class="icon-chevron-[% IF new_direction == 'desc' %]down[% ELSE %]up[% END %]"></i>[% END %]</a></th>
[% END -%]
            <h2>[% l('Results') %]</h2>
[% pagination = BLOCK %]
[% INCLUDE pagination.inc section = 'user/simple_search' IF items.size > 0 %]
[% END %]
      [% pagination  %]
            <table id="users" class="table table-condensed table-striped">
              <thead>
                <tr>
                  [% header('pid', 'Username') %]
                  [% header('firstname', 'Firstname', 'hidden-phone') %]
                  [% header('lastname', 'Lastname', 'hidden-phone') %]
                  [% header('email', 'Email') %]
                  [% header('nodes', '# nodes') %]
                </tr>
              </thead>
              <tbody>
                [%- FOREACH user IN items -%]
                <tr>
                  <td><i class="icon-[% IF user.password %]briefcase[% ELSE %]user[% END %]"></i> <a href="[% c.uri_for(c.controller('User').action_for('view'), [ user.pid ]) %]">[% user.pid %]</a></td>
                  <td class="hidden-phone">[% user.firstname %]</td>
                  <td class="hidden-phone">[% user.lastname %]</td>
                  <td>[% user.email %]</td>
                  <td>[% IF user.nodes > 0 %]<span class="badge">[% user.nodes %]</span>[% END %]</td>
                </tr>
                [%- END -%]
              </tbody>
            </table>
      [% pagination  %]
      <div id="noResult" class="unwell[% ' hidden' IF items.size > 0 %]">
        <i class="icon-search icon-large"></i><p>[% l('No user found') %]</p>
      </div>
